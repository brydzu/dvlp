#!/usr/bin/env node

const { server } = require('../index');
const program = require('commander');
const pkg = require('../package.json');

program
  .usage('[options] <path...>')
  .description(
    'Serve one or more static directories, or a single application server (<path> as file)'
  )
  .option('-p, --port <port>', 'port number', parseInt)
  .option('-r, --reload', 'reload connected browsers on file change')
  .arguments('<path...>')
  .action((path) => {
    server(path.length > 1 ? path : path[0], { port: program.port, reload: program.reload });
  })
  .version(pkg.version, '-v, --version')
  .parse(process.argv);
